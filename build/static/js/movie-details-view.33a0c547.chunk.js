(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{101:function(e,t,a){e.exports={buttonGoBack:"views_buttonGoBack__1sjSH",movieMainInfo:"views_movieMainInfo__1854Y",movieInfoHeadingValue:"views_movieInfoHeadingValue__3qyTV",moviePoster:"views_moviePoster__18MUF",movieInfoAditionanal:"views_movieInfoAditionanal__3jXVk",movieInfoAditionanalHeading:"views_movieInfoAditionanalHeading__2kYRn",active:"views_active__2yB0q"}},102:function(e,t,a){e.exports={movieCastList:"MovieCast_movieCastList__3TS6O",movieCastItem:"MovieCast_movieCastItem__bm878",movieCastItemProfile:"MovieCast_movieCastItemProfile__1cl4R"}},103:function(e,t,a){e.exports={movieReviewsList:"MovieReviews_movieReviewsList__M-DFy",movieReviewsItemAuthor:"MovieReviews_movieReviewsItemAuthor__3LRq3"}},104:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(15),s=a.n(r),i=a(24),o=a(20),c=a(21),u=a(23),v=a(22),l=a(0),m=a(11),p=a(2),d=a(101),h=a.n(d),f=a(8),j=a(102),b=a.n(j),O=a(14),g=a.n(O);g.a.defaults.baseURL="https://api.themoviedb.org/3",g.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US"};var w=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("movie/".concat(t,"/credits"));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.cast);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=a(1),_=function(e){Object(u.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={cast:[]},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.movieId,e.next=3,w(t);case 3:a=e.sent,this.setState({cast:a});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.cast;return Object(x.jsx)("ul",{className:b.a.movieCastList,children:e.map((function(e){return Object(x.jsxs)("li",{className:b.a.movieCastItem,children:[Object(x.jsx)("h2",{className:b.a.movieCastItemName,children:e.original_name}),Object(x.jsx)("img",{className:b.a.movieCastItemProfile,src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:e.original_name})]},e.cast_id)}))})}}]),a}(l.Component),I=Object(p.f)(_),y=a(81),k=a(103),C=a.n(k),N=a(73),R=a(74);g.a.defaults.baseURL="https://api.themoviedb.org/3",g.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US"};var L=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=t.page,e.prev=1,e.next=4,g.a.get("movie/".concat(a,"/reviews"),{params:{page:n}});case 4:return r=e.sent,i=r.data,e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){Object(u.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={reviews:[],currentPage:1,totalPages:1,isLoading:!1,error:null},e.fetchMovieReviews=function(){var t=e.state.currentPage,a={id:e.props.movieId,page:t};e.setState({isLoading:!0}),L(a).then((function(t){e.setState((function(e){return{reviews:[].concat(Object(y.a)(e.reviews),Object(y.a)(t.results)),totalPages:t.total_pages,currentPage:e.currentPage+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({isLoading:!1})}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchMovieReviews();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.reviews,a=e.isLoading,n=e.totalPages,r=e.currentPage;return console.log(n),t.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("ul",{className:C.a.movieReviewsList,children:t.map((function(e){return Object(x.jsxs)("li",{className:C.a.movieReviewsItem,children:[Object(x.jsx)("span",{className:C.a.movieReviewsItemAuthor,children:" ".concat(e.author,":")}),Object(x.jsx)("p",{className:C.a.movieReviewsItemContent,children:'"'.concat(e.content,'"')})]},e.id)}))}),a&&Object(x.jsx)(N.a,{}),n>1&&r<n&&!a&&Object(x.jsx)(R.a,{onClick:this.fetchMovieReview})]}):Object(x.jsx)("div",{children:"There is no any review on this movie"})}}]),a}(l.Component),A=Object(p.f)(M);g.a.defaults.baseURL="https://api.themoviedb.org/3",g.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US"};var P=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("movie/".concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),H=a(72),S=function(e){Object(u.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={poster:"",title:"",release:"",userScores:0,overview:"",genres:[]},e.handleGoBack=function(){var t,a=e.props,n=a.location;a.history.push((null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.from)||f.a.movies)},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.movieId,e.next=3,P(t).then((function(e){var t=e.poster_path,n=e.title,r=e.release_date,s=e.overview,i=e.genres,o=e.vote_average;a.setState({poster:t,title:n,release:r.split("-")[0],overview:s,genres:Object(H.a)(i),userScores:10*o})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.poster,a=e.title,r=e.release,s=e.userScores,i=e.overview,o=e.genres,c=this.props.match.params.movieId;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{type:"button",className:h.a.buttonGoBack,onClick:this.handleGoBack,children:"Go back"}),Object(x.jsxs)("div",{className:h.a.movieMainInfo,children:[Object(x.jsx)("img",{className:h.a.moviePoster,src:"https://image.tmdb.org/t/p/w500".concat(t),alt:a}),Object(x.jsxs)("div",{className:h.a.movieInfo,children:[Object(x.jsxs)("h2",{className:h.a.title,children:[a,Object(x.jsx)("span",{className:h.a.movieInfoRelease,children:r&&" (".concat(r.split("-")[0],")")})]}),Object(x.jsxs)("p",{className:h.a.movieInfoHeading,children:["User scores:",Object(x.jsx)("span",{className:h.a.movieInfoHeadingValue,children:" ".concat(s,"%")})]}),Object(x.jsxs)("p",{className:h.a.movieInfoHeading,children:["Genres:",Object(x.jsx)("span",{className:h.a.movieInfoHeadingValue,children:" ".concat(o)})]}),Object(x.jsxs)("p",{className:h.a.movieInfoHeading,children:["Overview:",Object(x.jsx)("span",{className:h.a.movieInfoHeadingValue,children:" ".concat(i)})]})]})]}),Object(x.jsxs)("div",{className:h.a.movieInfoAditionanal,children:["Aditional information",Object(x.jsx)("p",{children:Object(x.jsx)(m.b,{to:{pathname:"/movies/".concat(c,"/cast"),state:{from:this.props.location}},className:h.a.movieInfoAditionanalHeading,activeClassName:h.a.active,children:"Cast"})}),Object(x.jsx)(p.a,{path:"".concat(f.a.movieDetails,"/cast"),render:function(e){return Object(x.jsx)(I,Object(n.a)(Object(n.a)({},e),{},{movieId:c}))}}),Object(x.jsx)("p",{children:Object(x.jsx)(m.b,{to:{pathname:"/movies/".concat(c,"/reviews"),state:{from:this.props.location}},className:h.a.movieInfoAditionanalHeading,activeClassName:h.a.active,children:"Reviews"})}),Object(x.jsx)(p.a,{path:"".concat(f.a.movieDetails,"/reviews"),render:function(e){return Object(x.jsx)(A,Object(n.a)(Object(n.a)({},e),{},{movieId:c}))}})]})]})}}]),a}(l.Component);S.defaultProps={genres:[]};t.default=S},71:function(e,t,a){e.exports={buttonLoad:"Button_buttonLoad__3AieG"}},72:function(e,t,a){"use strict";t.a=function(e){var t=e.map((function(e){return e.name})),a=[];return t.length<3?a=t:(a=t.slice(0,2)).push("Other"),a.join(", ")}},73:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(20),r=a(21),s=a(23),i=a(22),o=a(0),c=a(75),u=a.n(c),v=(a(76),a(1)),l=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(v.jsx)(u.a,{type:"Circles",color:"#00BFFF",height:80,width:80,timeout:3e3})}}]),a}(o.Component)},74:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(20),r=a(21),s=a(23),i=a(22),o=a(0),c=a(71),u=a.n(c),v=a(1),l=function(e){Object(s.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var e=this.props.onClick;return Object(v.jsx)("button",{type:"button",className:u.a.buttonLoad,onClick:e,children:"Load more"})}}]),a}(o.Component)}}]);
//# sourceMappingURL=movie-details-view.33a0c547.chunk.js.map