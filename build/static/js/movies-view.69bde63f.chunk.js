(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[4],{101:function(e,t,r){e.exports={Searchbar:"Searchbar_Searchbar__aTxF_",SearchForm:"Searchbar_SearchForm__29ASD",SearchFormButton:"Searchbar_SearchFormButton__1-91V",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__d72hy",SearchFormInput:"Searchbar_SearchFormInput__3wO4_"}},106:function(e,t,r){"use strict";r.r(t);var n=r(82),a=r(20),c=r(21),s=r(23),o=r(22),i=r(0),u=r(101),l=r.n(u),h=r(1),p=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={query:""},e.handleChange=function(t){e.setState({query:t.currentTarget.value})},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.onSubmit)(e.state.query),e.setState({query:""})},e}return Object(c.a)(r,[{key:"render",value:function(){return Object(h.jsx)("header",{className:l.a.Searchbar,children:Object(h.jsxs)("form",{className:l.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(h.jsx)("button",{type:"submit",className:l.a.SearchFormButton,onSubmit:this.handleSubmit,children:Object(h.jsx)("span",{className:l.a.SearchFormButtonLabel,children:"Search"})}),Object(h.jsx)("input",{className:l.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie",onChange:this.handleChange,onKeyDown:this.handleKeyDown})]})})}}]),r}(i.Component),b=r(73),m=r(74),f=r(81),j=r(15),d=r.n(j),v=r(24),O=r(14),g=r.n(O);g.a.defaults.baseURL="https://api.themoviedb.org/3",g.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US",include_adult:"false"};var y=function(){var e=Object(v.a)(d.a.mark((function e(t){var r,n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query,n=t.page,e.prev=1,e.next=4,g.a.get("/search/movie",{params:{query:r,page:n}});case 4:return a=e.sent,c=a.data,e.abrupt("return",c.results);case 9:return e.prev=9,e.t0=e.catch(1),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),S=r(80),_=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var c=arguments.length,s=new Array(c),o=0;o<c;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={movies:[],searchQuery:"",currentPage:1,isLoading:!1,error:null},e.onChangeQuery=function(t){e.setState({searchQuery:t,currentPage:1,movies:[]})},e.searchMovies=function(){var t=e.state,r=t.currentPage,a={query:t.searchQuery,page:r};e.setState({isLoading:!0}),y(a).then((function(t){e.setState((function(e){return{movies:Object(n.a)(t),currentPage:e.currentPage+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({isLoading:!1})}))},e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=Object(S.a)("savedState");void 0!==e&&e!==this.state&&this.setState({searchQuery:e.searchQuery,currentPage:e.currentPage-1})}},{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.searchMovies(),localStorage.setItem("savedState",JSON.stringify(this.state))}},{key:"render",value:function(){var e=this.state,t=e.movies,r=e.isLoading,n=this.props.genresList;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{onSubmit:this.onChangeQuery}),Object(h.jsx)(f.a,{movies:t,genresList:n}),r&&Object(h.jsx)(b.a,{}),t.length>19&&!r&&Object(h.jsx)(m.a,{onClick:this.searchMovies})]})}}]),r}(i.Component);t.default=_},71:function(e,t,r){e.exports={buttonLoad:"Button_buttonLoad__3AieG"}},72:function(e,t,r){"use strict";t.a=function(e){var t=e.map((function(e){return e.name})),r=[];return t.length<3?r=t:(r=t.slice(0,2)).push("Other"),r.join(", ")}},73:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(20),a=r(21),c=r(23),s=r(22),o=r(0),i=r(75),u=r.n(i),l=(r(76),r(1)),h=function(e){Object(c.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return Object(l.jsx)(u.a,{type:"Circles",color:"#00BFFF",height:80,width:80,timeout:3e3})}}]),r}(o.Component)},74:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(20),a=r(21),c=r(23),s=r(22),o=r(0),i=r(71),u=r.n(i),l=r(1),h=function(e){Object(c.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var e=this.props.onClick;return Object(l.jsx)("button",{type:"button",className:u.a.buttonLoad,onClick:e,children:"Load more"})}}]),r}(o.Component)},77:function(e,t,r){e.exports={MovieList:"MovieList_MovieList__1FSgS"}},78:function(e,t,r){e.exports={MovieItem:"MovieItem_MovieItem__1dVZ3"}},79:function(e,t,r){},80:function(e,t,r){"use strict";t.a=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(r){console.log("Get state error: ",r)}}},81:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(20),a=r(21),c=r(23),s=r(22),o=r(0),i=r(2),u=r(77),l=r.n(u),h=r(11),p=r(78),b=r.n(p),m=r(79),f=r.n(m),j=r(1),d=function(e){Object(c.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){var e=this.props,t=e.poster,r=e.title,n=e.genres,a=e.release;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{className:f.a.filmsGalleryItemPoster,src:"https://image.tmdb.org/t/p/w500".concat(t),alt:r}),Object(j.jsxs)("p",{className:f.a.filmsGalleryItemTitle,children:[r.toUpperCase()," ",a&&"(".concat(a.split("-")[0],")")]}),Object(j.jsx)("p",{className:f.a.filmsGalleryItemGenres,children:n})]})}}]),r}(o.Component),v=Object(i.f)(d),O=r(72);var g=function(e,t){var r=t.filter((function(t){return e.includes(t.id)}));return Object(O.a)(r)},y=function(e){Object(c.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){var e=this.props,t=e.id,r=e.poster,n=e.title,a=e.genresIds,c=e.release,s=e.genresList,o=g(a,s);return Object(j.jsx)("li",{className:b.a.MovieItem,children:Object(j.jsx)(h.b,{to:{pathname:"/movies/".concat(t),state:{from:this.props.location}},children:Object(j.jsx)(v,{poster:r,title:n,genres:o,release:c})})},t)}}]),r}(o.Component),S=Object(i.f)(y),_=function(e){Object(c.a)(r,e);var t=Object(s.a)(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){var e=this.props.movies,t=this.props.genresList;return Object(j.jsx)("ul",{className:l.a.MovieList,children:e.map((function(e){return Object(j.jsx)(S,{id:e.id,title:e.title,release:e.release_date,poster:e.poster_path,genresIds:e.genre_ids,genresList:t},e.id)}))})}}]),r}(o.Component),x=Object(i.f)(_)}}]);
//# sourceMappingURL=movies-view.69bde63f.chunk.js.map