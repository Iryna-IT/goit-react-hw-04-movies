(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[1],{107:function(t,e,n){"use strict";n.r(e);var r=n(82),a=n(20),s=n(21),c=n(23),o=n(22),i=n(0),u=n(73),l=n(74),p=n(81),d=n(15),f=n.n(d),j=n(24),h=n(14),b=n.n(h);b.a.defaults.baseURL="https://api.themoviedb.org/3",b.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US",include_adult:"false"};var m=function(){var t=Object(j.a)(f.a.mark((function t(e){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/trending/movie/day",{params:{page:e}});case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:return t.prev=8,t.t0=t.catch(0),console.log("error",{error:t.t0}),t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),v=(n(80),n(1)),O=function(t){Object(c.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(a.a)(this,n);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return(t=e.call.apply(e,[this].concat(c))).state={trends:[],currentPage:1,totalPages:1,error:null},t.fetchTrends=function(){var e=t.state.currentPage;m(e).then((function(e){t.setState((function(t){return{trends:[].concat(Object(r.a)(t.trends),Object(r.a)(e.results)),totalPages:e.total_pages,currentPage:t.currentPage+1}}))})).catch((function(e){return t.setState({error:e})})).finally((function(){t.setState({isLoading:!1})}))},t.loadMore=function(){t.fetchTrends(),localStorage.setItem("savedState",JSON.stringify(t.state))},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetchTrends()}},{key:"render",value:function(){var t=this.state,e=t.trends,n=t.isLoading,r=t.currentPage,a=t.totalPages,s=this.props.genresList;return Object(v.jsxs)("div",{className:"HomeView",children:[Object(v.jsx)("h1",{className:"HomeView-title",children:"Trending today"}),e.length>0?Object(v.jsx)(p.a,{movies:e,genresList:s}):null,n&&Object(v.jsx)(u.a,{}),a>1&&r<a&&!n&&Object(v.jsx)(l.a,{onClick:this.loadMore})]})}}]),n}(i.Component);e.default=O},71:function(t,e,n){t.exports={buttonLoad:"Button_buttonLoad__3AieG"}},72:function(t,e,n){"use strict";e.a=function(t){var e=t.map((function(t){return t.name})),n=[];return e.length<3?n=e:(n=e.slice(0,2)).push("Other"),n.join(", ")}},73:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(20),a=n(21),s=n(23),c=n(22),o=n(0),i=n(75),u=n.n(i),l=(n(76),n(1)),p=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.jsx)(u.a,{type:"Circles",color:"#00BFFF",height:80,width:80,timeout:3e3})}}]),n}(o.Component)},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(20),a=n(21),s=n(23),c=n(22),o=n(0),i=n(71),u=n.n(i),l=n(1),p=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var t=this.props.onClick;return Object(l.jsx)("button",{type:"button",className:u.a.buttonLoad,onClick:t,children:"Load more"})}}]),n}(o.Component)},77:function(t,e,n){t.exports={MovieList:"MovieList_MovieList__1FSgS"}},78:function(t,e,n){t.exports={MovieItem:"MovieItem_MovieItem__1dVZ3"}},79:function(t,e,n){},80:function(t,e,n){"use strict";e.a=function(t){try{var e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(n){console.log("Get state error: ",n)}}},81:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(20),a=n(21),s=n(23),c=n(22),o=n(0),i=n(2),u=n(77),l=n.n(u),p=n(11),d=n(78),f=n.n(d),j=n(79),h=n.n(j),b=n(1),m=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.poster,n=t.title,r=t.genres,a=t.release;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{className:h.a.filmsGalleryItemPoster,src:"https://image.tmdb.org/t/p/w500".concat(e),alt:n}),Object(b.jsxs)("p",{className:h.a.filmsGalleryItemTitle,children:[n.toUpperCase()," ",a&&"(".concat(a.split("-")[0],")")]}),Object(b.jsx)("p",{className:h.a.filmsGalleryItemGenres,children:r})]})}}]),n}(o.Component),v=Object(i.f)(m),O=n(72);var g=function(t,e){var n=e.filter((function(e){return t.includes(e.id)}));return Object(O.a)(n)},y=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.id,n=t.poster,r=t.title,a=t.genresIds,s=t.release,c=t.genresList,o=g(a,c);return Object(b.jsx)("li",{className:f.a.MovieItem,children:Object(b.jsx)(p.b,{to:{pathname:"/movies/".concat(e),state:{from:this.props.location}},children:Object(b.jsx)(v,{poster:n,title:r,genres:o,release:s})})},e)}}]),n}(o.Component),x=Object(i.f)(y),L=function(t){Object(s.a)(n,t);var e=Object(c.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.movies,e=this.props.genresList;return Object(b.jsx)("ul",{className:l.a.MovieList,children:t.map((function(t){return Object(b.jsx)(x,{id:t.id,title:t.title,release:t.release_date,poster:t.poster_path,genresIds:t.genre_ids,genresList:e},t.id)}))})}}]),n}(o.Component),_=Object(i.f)(L)}}]);
//# sourceMappingURL=home-view.245134e5.chunk.js.map