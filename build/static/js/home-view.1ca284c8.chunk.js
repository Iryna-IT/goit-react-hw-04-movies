(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[1],{106:function(e,t,n){"use strict";n.r(t);var r=n(81),a=n(20),s=n(21),i=n(23),o=n(22),c=n(0),u=n(73),l=n(74),p=n(80),d=n(15),f=n.n(d),j=n(24),b=n(14),h=n.n(b);h.a.defaults.baseURL="https://api.themoviedb.org/3",h.a.defaults.params={api_key:"ffddee44025dd24685ea61d637d56d24",language:"en-US",include_adult:"false"};var v=function(){var e=Object(j.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/trending/movie/day",{params:{page:t}});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=n(1),O=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={trends:[],currentPage:1,totalPages:1,error:null},e.fetchTrends=function(){var t=e.state.currentPage;v(t).then((function(t){e.setState((function(e){return{trends:[].concat(Object(r.a)(e.trends),Object(r.a)(t.results)),totalPages:t.total_pages,currentPage:e.currentPage+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){e.setState({isLoading:!1})}))},e.loadMore=function(){e.fetchTrends(),localStorage.setItem("savedState",JSON.stringify(e.state))},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetchTrends()}},{key:"render",value:function(){var e=this.state,t=e.trends,n=e.isLoading,r=e.currentPage,a=e.totalPages,s=this.props.genresList;return Object(m.jsxs)("div",{className:"HomeView",children:[Object(m.jsx)("h1",{className:"HomeView-title",children:"Trending today"}),t.length>0?Object(m.jsx)(p.a,{movies:t,genresList:s}):null,n&&Object(m.jsx)(u.a,{}),a>1&&r<a&&!n&&Object(m.jsx)(l.a,{onClick:this.loadMore})]})}}]),n}(c.Component);O.defaultProps={genresList:[]};t.default=O},71:function(e,t,n){e.exports={buttonLoad:"Button_buttonLoad__3AieG"}},72:function(e,t,n){"use strict";t.a=function(e){var t=e.map((function(e){return e.name})),n=[];return t.length<3?n=t:(n=t.slice(0,2)).push("Other"),n.join(", ")}},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(20),a=n(21),s=n(23),i=n(22),o=n(0),c=n(75),u=n.n(c),l=(n(76),n(1)),p=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(l.jsx)(u.a,{type:"Circles",color:"#00BFFF",height:80,width:80,timeout:3e3})}}]),n}(o.Component)},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(20),a=n(21),s=n(23),i=n(22),o=n(0),c=n(71),u=n.n(c),l=n(1),p=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var e=this.props.onClick;return Object(l.jsx)("button",{type:"button",className:u.a.buttonLoad,onClick:e,children:"Load more"})}}]),n}(o.Component)},77:function(e,t,n){e.exports={MovieList:"MovieList_MovieList__1FSgS"}},78:function(e,t,n){e.exports={MovieItem:"MovieItem_MovieItem__1dVZ3"}},79:function(e,t,n){},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(20),a=n(21),s=n(23),i=n(22),o=n(0),c=n(2),u=n(77),l=n.n(u),p=n(11),d=n(78),f=n.n(d),j=n(79),b=n.n(j),h=n(1),v=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.poster,n=e.title,r=e.genres,a=e.release;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("img",{className:b.a.filmsGalleryItemPoster,src:"https://image.tmdb.org/t/p/w500".concat(t),alt:n}),Object(h.jsxs)("p",{className:b.a.filmsGalleryItemTitle,children:[n.toUpperCase()," ",a&&"(".concat(a.split("-")[0],")")]}),Object(h.jsx)("p",{className:b.a.filmsGalleryItemGenres,children:r})]})}}]),n}(o.Component);v.defaultProps={title:"",release:"",poster:"",genres:""};var m=Object(c.f)(v),O=n(72);var g=function(e,t){var n=t.filter((function(t){return e.includes(t.id)}));return Object(O.a)(n)},y=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.poster,r=e.title,a=e.genresIds,s=e.release,i=e.genresList,o=g(a,i);return Object(h.jsx)("li",{className:f.a.MovieItem,children:Object(h.jsx)(p.b,{to:{pathname:"/movies/".concat(t),state:{from:this.props.location}},children:Object(h.jsx)(m,{poster:n,title:r,genres:o,release:s})})},t)}}]),n}(o.Component);y.defaultProps={genresList:[],id:"",title:"",release:"",poster:"",genresIds:""};var x=Object(c.f)(y),L=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props.movies,t=this.props.genresList;return Object(h.jsx)("ul",{className:l.a.MovieList,children:e.map((function(e){return Object(h.jsx)(x,{id:e.id,title:e.title,release:e.release_date,poster:e.poster_path,genresIds:e.genre_ids,genresList:t},e.id)}))})}}]),n}(o.Component);L.defaultProps={genresList:[],movies:[]};var _=Object(c.f)(L)}}]);
//# sourceMappingURL=home-view.1ca284c8.chunk.js.map